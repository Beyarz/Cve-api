FROM ubuntu:latest
ADD scan.rb rest.rb localenv.rb Gemfile configuration.rb .ruby-version .env.production cron.sh views/. /root/cve/
WORKDIR /root/cve
EXPOSE 4000
RUN apt-get update \
  && apt-get -y upgrade \
  && apt-get install -y ruby \
  && apt-get install -y build-essential patch ruby-dev zlib1g-dev liblzma-dev \
  && apt-get install -y ruby-bundler \
  && bundle install \
  && mkdir views \
  && mv highlight.min.js views/ \
  && mv result.erb views/ \
  && ruby rest.rb
